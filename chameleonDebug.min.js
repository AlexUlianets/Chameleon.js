!function(n){var e={},o={},t=function(n){o.debug=!!n&&!!n.debug},r=function(n,e){if(o.debug){e=e||"log";var t={error:function(n){console.error("Chameleon.js:",n)},warn:function(n){console.warn("Chameleon.js:",n)},log:function(n){console.log("Chameleon.js:",n)}};void 0===n?t.error("Msg given to logger is undefined!"):t.hasOwnProperty(e)?t[e](n):t.error(["Unknown logAction type!",e])}},i=function(o,t){var r=e.allowed_values,i={is_allowed:!0};if(r.hasOwnProperty(t)){var a=function(e,o,t){var r=!1;return e.hasOwnProperty(t)&&n.each(e[t],function(n,e){if(o.toLowerCase()===e.toLowerCase())return r=e,!1}),r||o}(r,o,t);a!==o?i={is_allowed:!0,fixed_val:a,valid:!1,msg:'Setting "'+t+'" with value "'+o+'" case fixed to "'+a+'".'}:-1===r[t].indexOf(o)&&(i={is_allowed:!1,fixed_val:r[t][0],valid:!1,msg:'Not allowed value for "'+t+'". You can use only: ['+r[t].join(", ")+"]."})}return i},a=function(n){var e=!1;switch(typeof n){case"string":e=""===n;break;case"number":e=isNaN(parseFloat(n))}return e},l=function(n,o){return{ignore:a(n)&&-1!==e.can_be_empty.indexOf(o),result:function(){return r('isSettingCanBeIgnored - setting "'+o+'" will be ignored.',"log"),{prop:o,val:n,fixed_val:n,valid:!0,msg:'Setting "'+o+'" is ignored.'}}}};validateSettings=function(o,a,s){var u,c=[],f=o||{},d=[{type:"number",msg:function(n){return"Should be a number. Min: "+e.limits[n].min+", max: "+e.limits[n].max+"."},items:["color_alpha","alpha","color_difference","color_adapt_limit","canvas_side"]},{type:"string",msg:function(){return"Should be a string."},items:["content_prefix","settings_type","sort_type","color_format","wrap_color_mode","wrap_arrow_mode","color_html","source_color_html","img_src"]},{type:"color",msg:function(){return'Should be a color! String: hex (#xxx or #xxxxxx or xxx or xxxxxx) or rgb(x,x,x) or rgba(x,x,x,x). Array ([x, x, x, x]) or object ({"r": x, "g": x, "b": x, "alpha": x}).'},items:["dummy_back","dummy_front","color","source_color"]},{type:"boolean",msg:function(){return"Should be a boolean value: true or false."},items:["debug","async_colorize","apply_colors","adapt_colors","all_colors","insert_colors","data_colors"]},{type:"array",msg:function(){return"Should be an array."},items:["colors"]},{type:"object",msg:function(){return"Should be an object."},items:["$img","content","rules","settings_values"]},{type:"function",msg:function(){return"Should be a function."},items:["afterColorized","beforeAsyncColorized","afterAsyncColorized","onGetColorsSuccess","onGetColorsError"]}],g=function(e){return n.fn.chameleon("skipValidation")("fixColor",e)},v=function(e){return n.fn.chameleon("skipValidation")("isColorValid",e)},m=function(n,o){switch(o){case"content_prefix":n=e.content_prefix}return n},x=function(n,e,o){if(o.valid)switch(e){case"content_prefix":var t=String(n).replace(/\s+/g,"");n!==t&&(o.valid=!1,o.fixed_val=t,o.msg='afterValidation - value "'+n+'" of "'+e+'" was fixed! New value is "'+t+'".')}return o},p=function(n,e,o,t){return"function"!=typeof t||o||(n=t(m(n,e),e)),{valid:o,fixed_val:n}},_={numberValidation:function(n,o){n=parseFloat(n);var t=!0;return e.limits.hasOwnProperty(o)?t=!isNaN(n)&&e.limits[o].min<=n&&n<=e.limits[o].max:r('validateSettings/numberValidation - limits for number setting "'+o+'" are missing!',"warn"),p(n,o,t,function(n){return n=isNaN(n)?e.limits[o].min:Math.min(Math.max(n,e.limits[o].min),e.limits[o].max)})},stringValidation:function(n,e){return p(n,e,"string"==typeof n,function(n){return String(n)})},colorValidation:function(n,e){return p(n,e,v(n),g)},booleanValidation:function(n,e){return p(n,e,"boolean"==typeof n,function(n){return!!n})},arrayValidation:function(n,e){return p(n,e,O(n,e),S)},objectValidation:function(n,e){return p(n,e,"object"==typeof n,function(n){return{}})},functionValidation:function(n,e){return p(n,e,"function"==typeof n,function(n){return function(){}})}},y=function(e,o){var t=!1,a="";if(n.each(d,function(n,e){if(-1!==e.items.indexOf(o))return t=e.type,a=e.msg(o),!1}),t){var s=l(e,o);if(s.ignore)return s.result();var u=n.extend(n.extend(_[t+"Validation"](e,o),{msg:a}),i(e,o));return u=x(e,o,u),{prop:o,val:e,fixed_val:u.fixed_val,valid:u.valid,msg:u.msg}}return r('validateSettings - Unknown val_type "'+o+'".',"warn"),{prop:o,val:e,fixed_val:e,valid:!1,msg:'Unknown value type "'+o+'".'}},b=function(n){return!n.valid},h={},w=function(n){var o=!1,t=!1,r=v(n);if((t=r?!r:n.filter(function(n){var e=!1;return"string"==typeof n?e=v(n):"object"==typeof n&&(void 0!==n.color?(e=v(n.color),n.source_color&&(e=e&&v(n.source_color))):e=v(n)),!e}))&&t.length){var i=n.map(g);o={invalid:{prop:e.actions.WRAPCOLOR,val:n,fixed_val:i,valid:!1,msg:"All colors should be valid! Invalid colors: "+JSON.stringify(t)+"."},fixed_settings:i}}return o};h[e.actions.WRAPCOLOR]=w,h[e.actions.SORTCOLORS]=w;var O=function(n,e){var o=Array.isArray(n);switch(e){case"colors":o=o&&!w(n)}return o},S=function(n,e){var o=[];switch(e){case"colors":n=n.map(g)}return o},C={},A=function(n){var o=!1;if(!v(n)){var t=g(n);o={invalid:{prop:e.actions.WRAPCOLOR,val:n,fixed_val:t,valid:!1,msg:"Color should be valid! Invalid color: "+JSON.stringify(n)+"."},fixed_settings:t}}return o};return C[e.actions.WRAPCOLOR]=A,"string"==typeof o?(t({debug:!0}),C.hasOwnProperty(a)&&(u=C[a](o))&&(c.push(u.invalid),f=u.fixed_settings)):"number"==typeof o||(Array.isArray(o)?(t({debug:!0}),h.hasOwnProperty(a)&&(u=h[a](o))&&(c.push(u.invalid),f=u.fixed_settings)):"object"==typeof o&&(t(o),f=n.extend({},o),c=function(n){var e=[];for(var o in n)n.hasOwnProperty(o)&&e.push(y(n[o],o));return e}(o).filter(b),n.each(c,function(n,e){f[e.prop]=e.fixed_val}))),{invalid:c,fixed_settings:f}},init=function(n){e=(n=n||{})._s},window.chameleonDebug={init:init,logger:r,toggleDebug:t,validateSettings:validateSettings}}(jQuery);